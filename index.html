<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>åˆ†è§£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v2</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    #container { position: relative; width: 200px; height: 300px; margin: auto; background: #fff; border: 1px solid #ccc; }
    .screw {
      width: 30px; height: 30px; position: absolute; cursor: pointer;
    }
    #screw1, #screw2, #screw3, #screw4 { top: 5px; }
    #screw1 { left: 5px; }
    #screw2 { right: 5px; }
    #screw3 { bottom: 5px; left: 5px; }
    #screw4 { bottom: 5px; right: 5px; }

    #lcdPanel, #mainBoard, #mainBoardBack {
      position: absolute;
      top: 25px; left: 25px;
      width: 150px; height: 250px;
      cursor: pointer;
    }

    #mainBoard, #mainBoardBack, .inner-screw {
      display: none;
    }

    .tool-btn { margin: 5px; padding: 6px 12px; cursor: pointer; }
    #log { margin-top: 20px; color: red; font-weight: bold; text-align: center; }

    .inner-screw {
      width: 25px;
      height: 25px;
      position: absolute;
      cursor: pointer;
    }

    #innerScrew1 { top: 30px; left: 30px; }
    #innerScrew2 { top: 30px; right: 30px; }
    #innerScrew3 { bottom: 30px; left: 30px; }
    #innerScrew4 { bottom: 30px; right: 30px; }
  </style>
</head>
<body>

<h2>åˆ†è§£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼šæ¶²æ™¶ â†’ åŸºæ¿ã®å–ã‚Šå¤–ã—</h2>

<div style="text-align: center;">
  <button class="tool-btn" onclick="selectTool('star')">ğŸ”© æ˜Ÿå½¢ãƒ‰ãƒ©ã‚¤ãƒãƒ¼</button>
  <button class="tool-btn" onclick="selectTool('spudger')">ğŸª› ãƒ˜ãƒ©</button>
</div>

<div id="container">
  <!-- æ¶²æ™¶ãƒ‘ãƒãƒ« -->
  <svg id="lcdPanel" onclick="removeLcd()" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="150" height="250" rx="10" ry="10" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
    <text x="75" y="135" font-size="18" fill="white" text-anchor="middle">LCD</text>
  </svg>

  <!-- åŸºæ¿ -->
  <svg id="mainBoard" onclick="removeBoard()" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="150" height="250" rx="8" ry="8" fill="#27ae60" stroke="#1e8449" stroke-width="4"/>
    <circle cx="75" cy="125" r="10" fill="#ecf0f1"/>
    <text x="75" y="150" font-size="16" fill="white" text-anchor="middle">åŸºæ¿</text>
  </svg>

  <!-- è£åŸºæ¿ï¼ˆåŸºæ¿ãŒå¤–ã‚ŒãŸå¾Œã«æ®‹ã‚‹ï¼‰ -->
  <svg id="mainBoardBack" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="150" height="250" rx="8" ry="8" fill="#95a5a6" stroke="#7f8c8d" stroke-width="4"/>
    <text x="75" y="135" font-size="14" fill="white" text-anchor="middle">åŸºæ¿è£</text>
  </svg>

  <!-- åŸºæ¿ã®ãƒã‚¸4æœ¬ -->
  <div id="innerScrew1" class="inner-screw" onclick="removeInnerScrew(1)">
    <svg width="25" height="25"><circle cx="12" cy="12" r="10" fill="#ccc" stroke="#555" stroke-width="2"/>
      <line x1="6" y1="12" x2="18" y2="12" stroke="#333" stroke-width="2"/>
      <line x1="12" y1="6" x2="12" y2="18" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="innerScrew2" class="inner-screw" onclick="removeInnerScrew(2)">
    <svg width="25" height="25"><circle cx="12" cy="12" r="10" fill="#ccc" stroke="#555" stroke-width="2"/>
        <line x1="6" y1="12" x2="18" y2="12" stroke="#333" stroke-width="2"/>
        <line x1="12" y1="6" x2="12" y2="18" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="innerScrew3" class="inner-screw" onclick="removeInnerScrew(3)">
    <svg width="25" height="25"><circle cx="12" cy="12" r="10" fill="#ccc" stroke="#555" stroke-width="2"/>
        <line x1="6" y1="12" x2="18" y2="12" stroke="#333" stroke-width="2"/>
        <line x1="12" y1="6" x2="12" y2="18" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="innerScrew4" class="inner-screw" onclick="removeInnerScrew(4)">
    <svg width="25" height="25"><circle cx="12" cy="12" r="10" fill="#ccc" stroke="#555" stroke-width="2"/>
        <line x1="6" y1="12" x2="18" y2="12" stroke="#333" stroke-width="2"/>
        <line x1="12" y1="6" x2="12" y2="18" stroke="#333" stroke-width="2"/></svg>
  </div>
</div>

<div id="log">ç¾åœ¨ã®å·¥å…·ï¼šæœªé¸æŠ</div>

<script>
  let selectedTool = null;
  let lcdRemoved = false;
  let boardScrewsRemoved = [false, false, false, false];

  function selectTool(tool) {
    selectedTool = tool;
    const name = tool === 'star' ? 'æ˜Ÿå½¢ãƒ‰ãƒ©ã‚¤ãƒãƒ¼' : 'ãƒ˜ãƒ©';
    logMsg(`ç¾åœ¨ã®å·¥å…·ï¼š${name}`);
  }

  function removeLcd() {
    if (lcdRemoved) return;
    if (selectedTool !== 'spudger') {
      return logMsg("æ¶²æ™¶ã‚’å¤–ã™ã«ã¯ãƒ˜ãƒ©ãŒå¿…è¦ã§ã™ï¼");
    }
    lcdRemoved = true;
    document.getElementById("lcdPanel").style.display = "none";
    document.getElementById("mainBoard").style.display = "block";

    // ãƒã‚¸4æœ¬è¡¨ç¤º
    for (let i = 1; i <= 4; i++) {
      document.getElementById(`innerScrew${i}`).style.display = "block";
    }
    logMsg("æ¶²æ™¶ã‚’å¤–ã—ã¾ã—ãŸã€‚æ¬¡ã¯åŸºæ¿ã®ãƒã‚¸ã‚’å¤–ã—ã¦ãã ã•ã„ã€‚");
  }

  function removeInnerScrew(index) {
    if (selectedTool !== 'star') {
      return logMsg("åŸºæ¿ã®ãƒã‚¸ã«ã¯æ˜Ÿå½¢ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãŒå¿…è¦ã§ã™ï¼");
    }
    const el = document.getElementById(`innerScrew${index}`);
    if (!boardScrewsRemoved[index - 1]) {
      el.style.display = "none";
      boardScrewsRemoved[index - 1] = true;
      logMsg(`ãƒã‚¸${index}ã‚’å¤–ã—ã¾ã—ãŸ`);

      if (boardScrewsRemoved.every(Boolean)) {
        logMsg("ã™ã¹ã¦ã®ãƒã‚¸ã‚’å¤–ã—ã¾ã—ãŸã€‚åŸºæ¿ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å–ã‚Šå¤–ã—ã¦ãã ã•ã„ã€‚");
      }
    }
  }

  function removeBoard() {
    if (!boardScrewsRemoved.every(Boolean)) {
      return logMsg("ã™ã¹ã¦ã®ãƒã‚¸ã‚’å¤–ã—ã¦ãã ã•ã„ï¼");
    }
    document.getElementById("mainBoard").style.display = "none";
    document.getElementById("mainBoardBack").style.display = "block";
    logMsg("åŸºæ¿ã‚’å–ã‚Šå¤–ã—ã¾ã—ãŸã€‚è£å´ãŒæ®‹ã£ã¦ã„ã¾ã™ã€‚");
  }

  function logMsg(msg) {
    document.getElementById("log").innerText = msg;
  }
</script>

</body>
</html>
