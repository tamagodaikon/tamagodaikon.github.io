<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>分解シミュレーター with 工具判定</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    #container { position: relative; width: 200px; height: 300px; margin: auto; }
    .screw {
      width: 30px; height: 30px; position: absolute; cursor: pointer;
    }
    #screw1 { top: 5px; left: 5px; }
    #screw2 { top: 5px; right: 5px; }
    #screw3 { bottom: 5px; left: 5px; }
    #screw4 { bottom: 5px; right: 5px; }
    #lcdPanel, #mainBoard {
      position: absolute;
      top: 25px; left: 25px;
      width: 150px; height: 250px;
      cursor: pointer;
    }
    #mainBoard { display: none; }
    .tool-btn { margin: 5px; padding: 6px 12px; cursor: pointer; }
    #log { margin-top: 20px; color: red; font-weight: bold; text-align: center; }
  </style>
</head>
<body>

<h2>工具を選んでネジとパネルを外そう</h2>

<div style="text-align: center;">
  <button class="tool-btn" onclick="selectTool('star')">🔩 星形ドライバー</button>
  <button class="tool-btn" onclick="selectTool('spudger')">🪛 ヘラ</button>
  <button class="tool-btn" onclick="selectTool('other')">🧰 その他</button>
</div>

<div id="container">
  <!-- ネジ4本 -->
  <div id="screw1" class="screw" onclick="removeScrew(1)">
    <svg width="30" height="30"><circle cx="15" cy="15" r="13" fill="#ccc" stroke="#555" stroke-width="2"/>
    <line x1="5" y1="15" x2="25" y2="15" stroke="#333" stroke-width="2"/>
    <line x1="15" y1="5" x2="15" y2="25" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="screw2" class="screw" onclick="removeScrew(2)">
    <svg width="30" height="30"><circle cx="15" cy="15" r="13" fill="#ccc" stroke="#555" stroke-width="2"/>
    <line x1="5" y1="15" x2="25" y2="15" stroke="#333" stroke-width="2"/>
    <line x1="15" y1="5" x2="15" y2="25" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="screw3" class="screw" onclick="removeScrew(3)">
    <svg width="30" height="30"><circle cx="15" cy="15" r="13" fill="#ccc" stroke="#555" stroke-width="2"/>
    <line x1="5" y1="15" x2="25" y2="15" stroke="#333" stroke-width="2"/>
    <line x1="15" y1="5" x2="15" y2="25" stroke="#333" stroke-width="2"/></svg>
  </div>
  <div id="screw4" class="screw" onclick="removeScrew(4)">
    <svg width="30" height="30"><circle cx="15" cy="15" r="13" fill="#ccc" stroke="#555" stroke-width="2"/>
    <line x1="5" y1="15" x2="25" y2="15" stroke="#333" stroke-width="2"/>
    <line x1="15" y1="5" x2="15" y2="25" stroke="#333" stroke-width="2"/></svg>
  </div>

  <!-- 液晶パネル -->
  <svg id="lcdPanel" onclick="removeLcd()" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="150" height="250" rx="10" ry="10" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
    <text x="75" y="135" font-size="18" fill="white" text-anchor="middle">LCD</text>
  </svg>

  <!-- 基板 -->
  <svg id="mainBoard" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="120" height="180" rx="5" ry="5" fill="#27ae60" stroke="#1e8449" stroke-width="4"/>
    <circle cx="60" cy="90" r="10" fill="#ecf0f1"/>
    <text x="60" y="150" font-size="14" fill="white" text-anchor="middle">基板</text>
  </svg>
</div>

<div id="log">現在の工具：未選択</div>

<script>
  let screwsRemoved = [false, false, false, false];
  let selectedTool = null;

  function selectTool(tool) {
    selectedTool = tool;
    let name = {
      star: '星形ドライバー',
      spudger: 'ヘラ',
      other: 'その他工具'
    }[tool];
    logMsg(`現在の工具：${name}`);
  }

  function removeScrew(index) {
    if (selectedTool !== 'star') {
      return logMsg("このネジは星形ドライバーでないと外せません！");
    }
    document.getElementById(`screw${index}`).style.display = "none";
    screwsRemoved[index - 1] = true;
    checkAllScrews();
  }

  function checkAllScrews() {
    if (screwsRemoved.every(Boolean)) {
      document.getElementById("lcdPanel").style.stroke = "#f1c40f";
      logMsg("ネジをすべて外しました！LCDをヘラで取り外せます。");
    }
  }

  function removeLcd() {
    if (!screwsRemoved.every(Boolean)) {
      return logMsg("先にネジをすべて外してください！");
    }
    if (selectedTool !== 'spudger') {
      return logMsg("LCDを外すにはヘラが必要です！");
    }
    document.getElementById("lcdPanel").style.display = "none";
    document.getElementById("mainBoard").style.display = "block";
    logMsg("LCDを外しました！基板が見えました。");
  }

  function logMsg(msg) {
    document.getElementById("log").innerText = msg;
  }
</script>

</body>
</html>
